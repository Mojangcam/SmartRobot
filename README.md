# SmartRobot
스마트로봇 경진대회 동작 코드

## 설명</br>
대회 배치
<pre>
┌─┬─┐ Y4
└─┴─┘ Y3
└─┴─┘ Y2
└─┴─┘ Y1
└─┴─┘ Y0
X1X2X3
ㅁ  ㅁ
End Start
</pre>

1. Start부분에 로봇을 배치 (조금이라도 선을 밟으면 안됨)
2. 로봇 동작 시 동작버튼 하나만 누른 후 로봇에 그 어떠한 명령이나 조작을 해서는 안됨
3. 기둥의 색깔은 Red, Green, Blue, Yellow로 4가지 색상으로 구성되어 있다.
4. 블럭의 색깔은 Red, Greem, Blue로 3가지 색상으로 구성되어 있다.
5. 기둥 위에 다른 색상의 블럭이 위치할수 있으며, 노란색 기둥 위에는 그 어떠한 블럭도 올수 없다. (배치 상태일때)
6. Y0에는 기둥이 올수 없으며, 블럭또한 위치할 수 없다.
7. 기둥이 위치할수 있는 위치는 Y1부터 Y4까지이며, 가로줄에는 최대 1개의 기둥과 블럭이 올수 있다.
8. Y1부터 Y4까지 비어 있는 가로줄은 없다. 무조건 기둥이나 블럭이 1가지는 배치되어야 한다.
9. 기둥은 옮길 수 없으며, 블럭은 마음대로 옮길 수 있으나, 떨어지면 감점이다.
10. 로봇이 블럭의 색깔과 기둥의 색깔이 같게 배치한 후 End라인으로 조금이라도 들어온 상태에서 멈춰! 또는 스탑!을 외치는 순간 타이머가 중지되며 가장 빠르게 배치하는 로봇이 1위를 차지한다.
11. 중앙의 세로줄은 End와 Start의 중간지점이다.


## 로봇 동작 설명</br>
1. 버튼을 누르면 앞으로 가서 Start의 윗 부분라인을 감지하고 멈춘다.
2. 왼쪽으로 가면서 Start의 왼쪽 라인을 감지하고 멈춘다(포지션 세팅)
3. 왼쪽으로 이동하면서 Start의 왼쪽 라인을 로봇의 오른쪽 센서로 감지한 후 왼쪽으로 이동하여 End의 오른쪽 라인을 왼쪽 센서가 감지한다.
4. 감지한 두 라인까지의 시간을 측정하여 2로 나누어 중간을 맞춘다.
5. 앞으로 5초간 이동하면서 대회장에 입장한다.
6. Y0부분은 블럭이 올 수 없으므로 지나친다.
7. Y1부터 허스키렌즈로 블럭의 색깔을 인식하며 블럭의 중앙 좌표를 구한다.
8. 블럭의 중앙 좌표가 허스키 렌즈의 절반보다 높으면 블럭으로 인식하며, 낮으면 기둥으로 인식한다.
9. Y4까지 이동한 후 180도 돌아서 Y1까지 오면서 스캔을 총 8번을 한다. (4번만 해도 되지만 혹시 모를 상황에 대비)
10. 해당 블럭, 기둥을 좌표로 저장한다.
11. 현재 위치에서 가장 가까운 기둥의 좌표를 구한다 (노란색 기둥은 제외)
12. 가장 가까운 기둥으로 이동하여 그 기둥 위에 있는 블럭을 잡는다.
13. 노란색 기둥 위에 블럭을 내려놓는다.
14. 가장 가까운 기둥의 색깔을 구하여 그 기둥의 색깔과 같은 ID를 가진 블럭의 위치를 구해 이동한다.
15. 해당 블럭을 잡고 가장 가까운 기둥 위에 올려 놓은 후 해당 블럭의 아래에 있었던 기둥의 색깔 ID를 구해 기둥과 같은 색깔 ID를 가진 블럭으로 이동한다.
16. 그 블럭으로 이동하여 블럭을 잡고 같은 색깔의 기둥 위에 올려 놓은 후 노란색 기둥으로 이동한다.
17. 노란색 기둥으로 이동한 후 남아있는 기둥으로 이동하여 올려놓은 후 Y0으로 이동한다.
18. End라인까지 이동은 대각선, 앞으로 갔다 옆으로 이동 등 딜레이를 사용해도 된다.
19. End칸에 조금이라도 들어오면 스탑을 외쳐야 한다.


## 로봇 동작</br>
1. 배치
    <pre>1, 1 = 빨간 기둥위에 파란 블럭
    1, 2 = 초록 기둥 위에 빨간 블럭
    3, 3 = 노란 기둥
    3, 4 = 파란 기둥 위에 초록 블럭</pre>

3. 스캔 후 가장 가까운 빨간 기둥으로 이동
4. 파란블럭 잡고 노란기둥으로 이동해서 내려놓기
    <pre>1, 1 = 빨간 기둥
    1, 2 = 초록 기둥 위에 빨간 블럭
    3, 3 = 노란 기둥 위에 파란 블럭
    3, 4 = 파란 기둥 위에 초록 블럭</pre>
5. 빨간기둥의 색깔ID와 같은 ID를 가진블럭 (빨간 블럭)으로 가서 잡기
6. 빨간기둥으로 이동해서 내려놓기
    <pre>1, 1 = 빨간 기둥 빨간 블럭 ✔️
    1, 2 = 초록 기둥
    3, 3 = 노란 기둥 위에 파란 블럭
    3, 4 = 파란 기둥 위에 초록 블럭</pre>
7. 원래 빨간블럭이 있던 좌표에 있는 기둥(초록 기둥)을 구해서 같은 ID값을 가진 블럭으로 이동(초록 블럭)
8. 초록블럭을 잡고 초록기둥 위에 올려놓기
    <pre>1, 1 = 빨간 기둥 빨간 블럭✔️
    1, 2 = 초록 기둥 초록 블럭✔️
    3, 3 = 노란 기둥 위에 파란 블럭
    3, 4 = 파란 기둥</pre>
9. 남은건 하나이기 떄문에 노란기둥으로 이동 후 파란 기둥위에 내려놓기
    <pre>1, 1 = 빨간 기둥 빨간 블럭✔️
    1, 2 = 초록 기둥 초록 블럭✔️
    3, 3 = 노란 기둥
    3, 4 = 파란 기둥 파란 블럭✔️</pre>
10. Y0으로 이동해서 End라인으로 이동하기

